(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d44dddd2"],{"6c73":function(t,e,a){},9406:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("el-row",{attrs:{gutter:8}},[a("el-col",[a("div",{staticStyle:{padding:"0 5px 5px 0"}},[a("el-switch",{attrs:{"active-text":"自动更新","active-color":"#13ce66"},model:{value:t.autoUpdate,callback:function(e){t.autoUpdate=e},expression:"autoUpdate"}}),t._v(" "),a("span",{staticStyle:{float:"right","font-size":"14px",color:"#13ce66"}},[t._v("更新时间:"+t._s(t._f("parseTime")(t.now_time,"{h}:{i}:{s}")))])],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("minion-status-chart",{attrs:{list:t.minion_status_count},on:{"update:list":function(e){t.minion_status_count=e}}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("minion-info-chart",{attrs:{list:t.saltkey_certification_count},on:{"update:list":function(e){t.saltkey_certification_count=e}}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("release-count-chart",{attrs:{list:t.release_log_count},on:{"update:list":function(e){t.release_log_count=e}}})],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:8}},[a("el-col",{staticStyle:{"padding-right":"8px","margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[a("task-log-table",{attrs:{list:t.task_log},on:{"update:list":function(e){t.task_log=e}}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[a("release-log-table",{attrs:{list:t.release_log},on:{"update:list":function(e){t.release_log=e}}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[a("server-table",{attrs:{list:t.sys_status},on:{"update:list":function(e){t.sys_status=e}}})],1)],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},r=[],l=a("b85c"),o=a("313e"),c=a.n(o),u=a("ed08"),d={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(u["a"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var h=6e3,_={mixins:[d],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},list:{type:Array}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{list:function(t,e){var a=this;t!=e&&this.$nextTick((function(){a.initChart()}))}},methods:{initChart:function(){var t=0,e=0,a=0;if(this.list){var n,i=Object(l["a"])(this.list);try{for(i.s();!(n=i.n()).done;){var s=n.value;"在线"===s["minion_status"]?t=s["minion_status__count"]:"离线"===s["minion_status"]?e=s["minion_status__count"]:"异常"===s["minion_status"]&&(a=s["minion_status__count"])}}catch(r){i.e(r)}finally{i.f()}}this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"Minion状态",subtext:"Minion状态统计"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"value"}],yAxis:[{type:"category",inverse:!0,data:["在线","离线","异常"]}],series:[{name:"数量",type:"bar",stack:"vistors",barWidth:"60%",itemStyle:{normal:{color:function(t){var e=["#22DDDD","#FE8463","#FAD860"];return e[t.dataIndex]}}},data:[t,e,a],animationDuration:h}]})}}},f=_,p=a("2877"),m=Object(p["a"])(f,s,r,!1,null,null,null),v=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},y=[],g=a("ade3");a("817d");var x={mixins:[d],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},list:{type:Array},now_time:{type:[String,Date]}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{list:function(t,e){var a=this;t!=e&&this.$nextTick((function(){a.initChart()}))}},methods:{initChart:function(){var t,e=0,a=0,n=0,i=0;if(this.list){var s,r=Object(l["a"])(this.list);try{for(r.s();!(s=r.n()).done;){var o=s.value;"accepted"===o["certification_status"]?e=o["certification_status__count"]:"unaccepted"===o["certification_status"]?a=o["certification_status__count"]:"denied"===o["certification_status"]?n=o["certification_status__count"]:"rejected"===o["certification_status"]&&(i=o["certification_status__count"])}}catch(u){r.e(u)}finally{r.f()}}this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"Minion信息",subtext:"Minion认证分布比例",left:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["已认证","待认证","禁止","已拒绝"]},series:[(t={name:"Minion信息",type:"pie",roseType:"radius",radius:"55%"},Object(g["a"])(t,"radius",[15,95]),Object(g["a"])(t,"data",[{value:e,name:"已认证"},{value:a,name:"待认证"},{value:n,name:"禁止"},{value:i,name:"已拒绝"}]),Object(g["a"])(t,"animationEasing","cubicInOut"),Object(g["a"])(t,"animationDuration",2600),t)]})}}},w=x,$=Object(p["a"])(w,b,y,!1,null,null,null),S=$.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},k=[];a("817d");var C={mixins:[d],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},list:{type:Array}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{list:function(t,e){var a=this;t!=e&&this.$nextTick((function(){a.initChart()}))}},methods:{initChart:function(){var t=0,e=0,a=0,n=0,i=0,s=0,r=0,o=0,u=0,d=0,h=0,_=0;if(this.list){var f,p=Object(l["a"])(this.list);try{for(p.s();!(f=p.n()).done;){var m=f.value;1===m["month"]?t=m["count"]:2===m["month"]?e=m["count"]:3===m["month"]?a=m["count"]:4===m["month"]?n=m["count"]:5===m["month"]?i=m["count"]:6===m["month"]?s=m["count"]:7===m["month"]?r=m["count"]:8===m["month"]?o=m["count"]:9===m["month"]?u=m["count"]:10===m["month"]?d=m["count"]:11===m["month"]?h=m["count"]:12===m["month"]&&(_=m["count"])}}catch(v){p.e(v)}finally{p.f()}}this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"月发布量",subtext:"发布系统发布量统计"},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"发布次数",type:"bar",barWidth:"60%",data:[t,e,a,n,i,s,r,o,u,d,h,_]}]})}}},z=C,O=Object(p["a"])(z,E,k,!1,null,null,null),D=O.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最新定时任务日志")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-top":"5px"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"任务名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.task_name)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("parseTime")(e.row.date_done,"{y}-{m}-{d} {h}:{i}"))+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-tag",{attrs:{type:t._f("statusFilter")(n.status)}},[t._v("\n        "+t._s(n.status)+"\n      ")])]}}])})],1)],1)},j=[],T={filters:{statusFilter:function(t){var e={SUCCESS:"success",STARED:"danger"};return e[t]},orderNoFilter:function(t){return t.substring(0,30)}},props:{list:{type:Array}},data:function(){return{}},methods:{}},A=T,N=Object(p["a"])(A,R,j,!1,null,null,null),I=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最新发布日志")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-top":"5px"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"应用名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.app_name)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("parseTime")(e.row.create_time,"{y}-{m}-{d} {h}:{i}"))+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-tag",{attrs:{type:t._f("statusFilter")(n.release_result)}},[t._v("\n        "+t._s(n.release_result)+"\n      ")])]}}])})],1)],1)},L=[],H={filters:{statusFilter:function(t){var e={"发布成功":"success","发布失败":"danger"};return e[t]},orderNoFilter:function(t){return t.substring(0,30)}},props:{list:{type:Array}},data:function(){return{}},methods:{}},M=H,U=Object(p["a"])(M,F,L,!1,null,null,null),W=U.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("系统状态")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-top":"5px"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.name)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(a.value)+"\n    ")]}}])})],1)],1)},J=[],P={filters:{orderNoFilter:function(t){return t.substring(0,30)}},props:{list:{type:Array}},data:function(){return{}},methods:{}},q=P,G=Object(p["a"])(q,B,J,!1,null,null,null),K=G.exports,Q=a("b775");function V(t){return Object(Q["a"])({url:"/dashboard/",method:"post",data:t})}var X={name:"DashboardAdmin",components:{MinionStatusChart:v,MinionInfoChart:S,ReleaseCountChart:D,TaskLogTable:I,ReleaseLogTable:W,ServerTable:K},watch:{autoUpdate:function(t){var e=this;t?(clearInterval(this.myInterval),this.myInterval=setInterval((function(){setTimeout(e.fetchData(),0)}),6e4)):clearInterval(this.myInterval)}},created:function(){this.fetchData()},data:function(){return{autoUpdate:!1,list:null,now_time:"",old_list:null,myInterval:"",task_log:null,release_log:null,saltkey_certification_count:null,minion_status_count:null,release_log_count:null,sys_status:null}},methods:{fetchData:function(){var t=this,e={opt_cmd:"dashboard_search"};V(e).then((function(e){var a=e.data.results;t.old_list!=a&&(t.release_log=e.data.results.release_log,t.task_log=e.data.results.task_log,t.saltkey_certification_count=e.data.results.saltkey_certification_count,t.minion_status_count=e.data.results.minion_status_count,t.release_log_count=e.data.results.release_log_count,t.sys_status=e.data.results.sys_status),t.now_time=new Date}))}}},Y=X,Z=(a("b16a"),Object(p["a"])(Y,n,i,!1,null,"0c1573f8",null));e["default"]=Z.exports},b16a:function(t,e,a){"use strict";var n=a("6c73"),i=a.n(n);i.a}}]);