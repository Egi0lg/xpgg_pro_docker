(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5afcf6cf"],{"0aaa":function(t,e,a){},3482:function(t,e,a){},"383f":function(t,e,a){"use strict";a.d(e,"m",(function(){return n})),a.d(e,"q",(function(){return s})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return c})),a.d(e,"s",(function(){return d})),a.d(e,"w",(function(){return u})),a.d(e,"r",(function(){return _})),a.d(e,"y",(function(){return p})),a.d(e,"z",(function(){return f})),a.d(e,"x",(function(){return m})),a.d(e,"o",(function(){return g})),a.d(e,"A",(function(){return b})),a.d(e,"c",(function(){return h})),a.d(e,"p",(function(){return v})),a.d(e,"n",(function(){return x})),a.d(e,"t",(function(){return y})),a.d(e,"v",(function(){return j})),a.d(e,"u",(function(){return w})),a.d(e,"j",(function(){return k})),a.d(e,"f",(function(){return O})),a.d(e,"k",(function(){return S})),a.d(e,"g",(function(){return D})),a.d(e,"i",(function(){return L})),a.d(e,"h",(function(){return T})),a.d(e,"l",(function(){return F}));var l=a("b775");function n(t){return Object(l["a"])({url:"/saltstack/salt-minion/1/",method:"get",params:t})}function s(t){return Object(l["a"])({url:"/saltstack/salt-key/",method:"get",params:t})}function o(){return Object(l["a"])({url:"/saltstack/salt-key/",method:"post",data:{salt_key_tag:"global_flush_salt_key"}})}function r(t){return Object(l["a"])({url:"/saltstack/salt-key-opt/accept/",method:"post",data:{salt_key_tag:"accept_salt_key",minion_id:t}})}function i(t){return Object(l["a"])({url:"/saltstack/salt-key-opt/delete/",method:"post",data:{salt_key_tag:"delete_salt_key",minion_id:t}})}function c(t){return Object(l["a"])({url:"/saltstack/salt-key-opt/del-denied/",method:"post",data:{salt_key_tag:"delete_denied_salt_key",minion_id:t}})}function d(t){return Object(l["a"])({url:"/saltstack/salt-key-opt/reject/",method:"post",data:{salt_key_tag:"reject_salt_key",minion_id:t}})}function u(t){return Object(l["a"])({url:"/saltstack/salt-key/"+t+"/",method:"get"})}function _(t){return Object(l["a"])({url:"/saltstack/salt-minion/",method:"get",params:t})}function p(){return Object(l["a"])({url:"/saltstack/salt-minion/",method:"post",data:{salt_minion_tag:"global_update_salt_minion_list"}})}function f(){return Object(l["a"])({url:"/saltstack/salt-minion-opt/status-update/",method:"post",data:{salt_minion_tag:"global_update_salt_minion_status"}})}function m(t){return Object(l["a"])({url:"/saltstack/salt-minion-opt/update/",method:"post",data:{salt_minion_tag:"update_salt_minion",minion_id:t}})}function g(t){return Object(l["a"])({url:"/saltstack/salt-cmd/",method:"get",params:t})}function b(t){return Object(l["a"])({url:"/saltstack/salt-cmd/",method:"post",data:{salt_cmd_tag:"collection_info",collection_style:t.collection_style,minions:t.minions}})}function h(){return Object(l["a"])({url:"/saltstack/salt-cmd-opt/delete/",method:"post",data:{salt_cmd_tag:"salt_cmd_delete"}})}function v(t){return Object(l["a"])({url:"/saltstack/salt-cmd-opt/get-module/",method:"get",params:{salt_cmd_type:t}})}function x(t,e){return Object(l["a"])({url:"/saltstack/salt-cmd-opt/get-cmd/",method:"get",params:{salt_cmd_type:t,salt_cmd_module:e}})}function y(t){return Object(l["a"])({url:"/saltstack/salt-exe/",method:"post",data:t})}function j(t){return Object(l["a"])({url:"/saltstack/salt-tool/job-search/status/",method:"post",data:t})}function w(t){return Object(l["a"])({url:"/saltstack/salt-tool/job-search/result/",method:"post",data:t})}function k(t){return Object(l["a"])({url:"/saltstack/file-manage/file-tree/",method:"post",data:t})}function O(t){return Object(l["a"])({url:"/saltstack/file-manage/file-content/",method:"post",data:t})}function S(t){return Object(l["a"])({url:"/saltstack/file-manage/file-update/",method:"post",data:t})}function D(t){return Object(l["a"])({url:"/saltstack/file-manage/file-create/",method:"post",data:t})}function L(t){return Object(l["a"])({url:"/saltstack/file-manage/file-rename/",method:"post",data:t})}function T(t){return Object(l["a"])({url:"/saltstack/file-manage/file-delete/",method:"post",data:t})}function F(t){return Object(l["a"])({url:"/saltstack/file-manage/file-upload/",method:"post",data:t})}},"5c83":function(t,e,a){"use strict";a("a481"),a("6762"),a("2fdb");var l={bind:function(t,e,a){var l=t.querySelector(".el-dialog__header"),n=t.querySelector(".el-dialog");l.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();l.onmousedown=function(t){var e=t.clientX-l.offsetLeft,o=t.clientY-l.offsetTop,r=n.offsetWidth,i=n.offsetHeight,c=document.body.clientWidth,d=document.body.clientHeight,u=n.offsetLeft,_=c-n.offsetLeft-r,p=n.offsetTop,f=d-n.offsetTop-i,m=s(n,"left"),g=s(n,"top");m.includes("%")?(m=+document.body.clientWidth*(+m.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(m=+m.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(t){var l=t.clientX-e,s=t.clientY-o;-l>u?l=-u:l>_&&(l=_),-s>p?s=-p:s>f&&(s=f),n.style.cssText+=";left:".concat(l+m,"px;top:").concat(s+g,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}},n=function(t){t.directive("el-drag-dialog",l)};window.Vue&&(window["el-drag-dialog"]=l,Vue.use(n)),l.install=n;e["a"]=l},6724:function(t,e,a){"use strict";a("8d41");var l="@@wavesContext";function n(t,e){function a(a){var l=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},l),s=n.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var o=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",s.appendChild(r)),n.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-o.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-o.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=n.color,r.className="waves-ripple z-active",!1}}return t[l]?t[l].removeHandle=a:t[l]={removeHandle:a},a}var s={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[l].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[l].removeHandle,!1),t[l]=null,delete t[l]}},o=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(o)),s.install=o;e["a"]=s},"8d41":function(t,e,a){},"8fe2":function(t,e,a){"use strict";var l=a("0aaa"),n=a.n(l);n.a},a812:function(t,e,a){"use strict";var l=a("d47d"),n=a.n(l);n.a},c64e:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:t.saltTool,"status-icon":"","label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"请选择工具："}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择工具"},model:{value:t.saltTool.name,callback:function(e){t.$set(t.saltTool,"name",e)},expression:"saltTool.name"}},t._l(t.toolList,(function(t){return a("el-option",{key:t.name,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("span",{staticStyle:{"font-weight":"normal",color:"#3FB8AF","font-size":"13px","text-align":"left",padding:"7px 7px"}},[t._v(t._s(t.tool_help[t.saltTool.name]))])],1)],1),t._v(" "),a("hr"),t._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[a(t.saltTool.name,{tag:"component"})],1)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"salttool-jobsearch-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"overflow_set",attrs:{span:12}},[a("el-form",{ref:"jobStatus",staticStyle:{"padding-top":"20px"},attrs:{model:t.jobStatus,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"任务状态查询：",prop:"data",rules:[{required:!0,message:"JID不能为空",trigger:"change"}]}},[a("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入要查询的jid",clearable:""},model:{value:t.jobStatus.data,callback:function(e){t.$set(t.jobStatus,"data",e)},expression:"jobStatus.data"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",loading:t.jobStatusLoading},on:{click:function(e){return t.handJobTool("jobStatus")}}},[t._v("查询")])],1),t._v(" "),a("span",{staticStyle:{"font-weight":"normal",color:"#3FB8AF","font-size":"13px","text-align":"left",padding:"7px 7px"}},[t._v("提示：结果为true说明任务执行完成")])],1)],1),t._v(" "),a("el-form",{ref:"jobResult",staticStyle:{"padding-top":"20px"},attrs:{model:t.jobResult,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"任务结果查询：",prop:"data",rules:[{required:!0,message:"JID不能为空",trigger:"change"}]}},[a("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入要查询的jid",clearable:""},model:{value:t.jobResult.data,callback:function(e){t.$set(t.jobResult,"data",e)},expression:"jobResult.data"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",loading:t.jobResultLoading},on:{click:function(e){return t.handJobTool("jobResult")}}},[t._v("查询")])],1),t._v(" "),a("span",{staticStyle:{"font-weight":"normal",color:"#3FB8AF","font-size":"13px","text-align":"left",padding:"7px 7px"}},[t._v("提示：注意先确认任务是否执行完毕")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form",{ref:"dataForm",staticClass:"salt-result",attrs:{"label-position":"top","label-width":"130px"}},[a("el-form-item",{attrs:{label:"执行结果:"}},[a("pre",{directives:[{name:"loading",rawName:"v-loading",value:t.resultLoading,expression:"resultLoading"}],ref:"salt_exe_result",staticClass:"saltexe_pre",attrs:{"element-loading-text":t.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},domProps:{innerHTML:t._s(t.salt_exe_result_data)}},[t._v(t._s(t.salt_exe_result_data))])])],1)],1)],1)],1)},o=[],r=(a("6b54"),a("383f")),i=a("6724"),c={directives:{waves:i["a"]},data:function(){return{jobStatus:{data:""},jobResult:{data:""},jobStatusLoading:!1,jobResultLoading:!1,salt_exe_result_data:"",resultLoading:!1,loadingText:"执行中"}},methods:{result_fun:function(t,e){if(t)for(var a in t){var l=t[a];"[object Object]"===Object.prototype.toString.call(l)||"[object Array]"===Object.prototype.toString.call(l)?(this.salt_exe_result_data=this.salt_exe_result_data+"<p style='color: #3FB8AF;padding-left: "+25*e+"px;'>"+a+":</p>",this.result_fun(l,e+1)):(this.salt_exe_result_data=this.salt_exe_result_data+"<p style='color: #3FB8AF;padding-left: "+25*e+"px;'>"+a+":</p>",this.salt_exe_result_data=this.salt_exe_result_data+"<p style='padding-left: "+25*(e+1)+"px;'>"+l+"</p>")}},handJobTool:function(t){var e=this;console.log(t),this.$refs[t].validate((function(a){if(!a)return!1;var l={jid:""};"jobStatus"==t?(e.jobStatusLoading=!0,e.loadingText="任务状态查询执行中",e.resultLoading=!0,l.salt_tool_tag="search_jid_status",l.jid=e.jobStatus.data,e.salt_exe_result_data="",Object(r["v"])(l).then((function(t){if(t.data.status){e.salt_exe_result_data="jid "+l.jid+" 任务状态查询:";var a=0;for(var n in t.data.results){var s=t.data.results[n];"[object Object]"===Object.prototype.toString.call(s)?(e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #45ddd4;font-weight: bold;'>"+n+":</p>",e.result_fun(s,a+1)):"[object Array]"===Object.prototype.toString.call(s)?(e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #45ddd4;font-weight: bold;'>"+n+":</p>",e.result_fun(s,a+1),e.salt_exe_result_data=e.salt_exe_result_data+"\n\n"):(e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #3FB8AF;font-weight: bold;'>"+n+":</p>",e.salt_exe_result_data=e.salt_exe_result_data+"<p style='padding-left: 25px;'>"+s+"</p>",e.salt_exe_result_data=e.salt_exe_result_data+"\n\n")}}else e.salt_exe_result_data="",e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #bf0000;'>"+t.data.results+"</p>";e.jobStatusLoading=!1,e.resultLoading=!1})).catch((function(t){console.log("saltToolJobSearchStatus"+t)}))):"jobResult"==t&&(e.jobResultLoading=!0,e.loadingText="任务结果查询执行中",e.resultLoading=!0,l.salt_tool_tag="search_jid_result",l.jid=e.jobResult.data,e.salt_exe_result_data="",Object(r["u"])(l).then((function(t){if(t.data.status){e.salt_exe_result_data="jid "+l.jid+" 任务结果查询:";var a=0;for(var n in t.data.results){var s=t.data.results[n];"[object Object]"===Object.prototype.toString.call(s)?(e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #45ddd4;font-weight: bold;'>"+n+":</p>",e.result_fun(s,a+1)):"[object Array]"===Object.prototype.toString.call(s)?(e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #45ddd4;font-weight: bold;'>"+n+":</p>",e.result_fun(s,a+1),e.salt_exe_result_data=e.salt_exe_result_data+"\n\n"):(e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #3FB8AF;font-weight: bold;'>"+n+":</p>",e.salt_exe_result_data=e.salt_exe_result_data+"<p style='padding-left: 25px;'>"+s+"</p>",e.salt_exe_result_data=e.salt_exe_result_data+"\n\n")}}else e.salt_exe_result_data="",e.salt_exe_result_data=e.salt_exe_result_data+"<p style='color: #bf0000;'>"+t.data.results+"</p>";e.jobResultLoading=!1,e.resultLoading=!1})).catch((function(t){console.log("saltToolJobSearchResult"+t)})))}))}}},d=c,u=(a("8fe2"),a("2877")),_=Object(u["a"])(d,s,o,!1,null,"17d75bf1",null),p=_.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"salttool-windowscrontab-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"overflow_set",attrs:{span:12}},[a("el-form",{ref:"ruleForm",attrs:{model:t.exeData,"status-icon":"",rules:t.rules,"label-width":"120px","label-position":"right"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"runner"!=t.exeData.client,expression:"exeData.client!='runner'"}],attrs:{label:"执行对象类型：",prop:"tgt_type"}},[a("el-row",[a("el-radio-group",{model:{value:t.exeData.tgt_type,callback:function(e){t.$set(t.exeData,"tgt_type",e)},expression:"exeData.tgt_type"}},[a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"any"}},[t._v("所有")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"minion_list"}},[t._v("Minion_ID")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"pcre"}},[t._v("Minion正则")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"custom_group"}},[t._v("自定义组")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"grain"}},[t._v("Grain")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"grain_pcre"}},[t._v("Grain正则")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"ip_address"}},[t._v("IP")])],1)],1)],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"minion_list"==t.exeData.tgt_type&&"runner"!=t.exeData.client,expression:"exeData.tgt_type=='minion_list'&&exeData.client!='runner'"}],attrs:{label:"执行对象：",prop:"minion_list"}},[a("el-transfer",{ref:"dataTransfer",attrs:{filterable:"","filter-placeholder":"搜索Minion ID",titles:["Minion ID选择","已选Minion ID"],data:t.minion_list},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.option;return a("span",{},[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:l.label,placement:"right"}},[a("span",[t._v(t._s(l.label))])])],1)}}]),model:{value:t.exeData.minion_list,callback:function(e){t.$set(t.exeData,"minion_list",e)},expression:"exeData.minion_list"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.transfer_error,expression:"transfer_error"}],staticClass:"dataTransfer_error"},[t._v("\n              请至少选择一个Minion ID\n            ")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.tgt_type_lable[t.exeData.tgt_type]&&"runner"!=t.exeData.client,expression:"tgt_type_lable[exeData.tgt_type]&&exeData.client!='runner'"}],attrs:{label:"执行对象：",prop:"tgt"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:t.tgt_type_placeholder[t.exeData.tgt_type],clearable:""},model:{value:t.exeData.tgt,callback:function(e){t.$set(t.exeData,"tgt",e)},expression:"exeData.tgt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Client："}},[a("el-select",{attrs:{placeholder:"命令"},on:{change:t.handFilterModule},model:{value:t.exeData.client,callback:function(e){t.$set(t.exeData,"client",e)},expression:"exeData.client"}},[a("el-option",{attrs:{label:"local",value:"local"}}),t._v(" "),a("el-option",{attrs:{label:"local_async",value:"local_async"}}),t._v(" "),a("el-option",{attrs:{label:"runner",value:"runner"}})],1),t._v(" "),a("span",{staticStyle:{"font-weight":"normal",color:"#3FB8AF","font-size":"13px","text-align":"left",padding:"7px 7px"}},[t._v(t._s(t.salt_cmd_help[t.exeData.client]))])],1),t._v(" "),a("el-form-item",{attrs:{label:"Module："}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择模块"},model:{value:t.select_module,callback:function(e){t.select_module=e},expression:"select_module"}},t._l(t.module_list,(function(t){return a("el-option",{key:t.salt_cmd_module,attrs:{label:t.salt_cmd_module,value:t.salt_cmd_module}})})),1),t._v(" "),a("span",{staticStyle:{"font-weight":"normal",color:"#3FB8AF","font-size":"13px","text-align":"left",padding:"7px 7px"}},[t._v("提示：如已知晓要执行的命令可省略")])],1),t._v(" "),a("el-form-item",{attrs:{label:"Fun：",prop:"fun"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":t.funSearch,debounce:0,placeholder:"输入要执行的命令"},model:{value:t.exeData.fun,callback:function(e){t.$set(t.exeData,"fun",e)},expression:"exeData.fun"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getCmdInfo}},[t._v("命令帮助")])],1),t._v(" "),a("el-form-item",{attrs:{label:"Arg：",prop:"arg"}},[t._l(t.arg_count,(function(e,l){return a("el-col",{key:l,staticStyle:{padding:"0 0 2px 0"},attrs:{span:16}},[a("el-input",{attrs:{placeholder:"请输入参数"+e,clearable:""},model:{value:t.args[e-1],callback:function(a){t.$set(t.args,e-1,a)},expression:"args[val-1]"}})],1)})),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.addArg}}),t._v(" "),t.arg_count>1?a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:""},on:{click:t.delArg}}):t._e()],1)],2),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",loading:t.exeLoading},on:{click:t.handSaltExe}},[t._v("执行命令")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small"},on:{click:function(e){t.exeLoading=!1}}},[t._v("取消")])],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-collapse",[a("el-collapse-item",[a("template",{slot:"title"},[a("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v("Arg填写帮助信息"),a("i",{staticClass:"header-icon el-icon-info"})])]),t._v(" "),a("h4",[t._v("平台调用的是salt-api所以Arg参数写法与命令行下有所不同")]),t._v(" "),a("p",[t._v("例1： 命令：ps.proc_info 从命令帮助中可以看到CLI下是这样的：")]),t._v(" "),a("p",[t._v("salt '*' ps.proc_info 2322 attrs='[\"pid\", \"name\"]' 其中参数是："),a("span",{staticStyle:{color:"red"}},[t._v("2322 ")]),t._v("和"),a("span",{staticStyle:{color:"red"}},[t._v('attrs=\'["pid", "name"]\'')])]),t._v(" "),a("p",[t._v("平台需要写成：参数1:"),a("span",{staticStyle:{color:"red"}},[t._v("pid=2322 ")]),t._v("参数2:"),a("span",{staticStyle:{color:"red"}},[t._v('attrs=["pid","name"]')]),t._v("   # 注意第二个参数列表外的引号不需要")]),t._v(" "),a("p",[t._v("例2： 命令：salt '*' state.sls myslsfile pillar=\"{foo: 'Foo!', bar: 'Bar!'}\"")]),t._v(" "),a("p",[t._v("平台需要写成：参数1:"),a("span",{staticStyle:{color:"red"}},[t._v("myslsfile ")]),t._v("参数2:"),a("span",{staticStyle:{color:"red"}},[t._v("pillar={foo: 'Foo!', bar: 'Bar!'}")]),t._v("   # 注意第二个参数列表外的引号不需要")]),a("p")],2)],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form",{ref:"dataForm",staticClass:"salt-result",attrs:{model:t.exeData,"label-position":"top","label-width":"130px"}},[a("el-form-item",{attrs:{label:"执行结果:"}},[a("pre",{directives:[{name:"loading",rawName:"v-loading",value:t.resultLoading,expression:"resultLoading"}],ref:"salt_exe_result",staticClass:"saltexe_pre",attrs:{"element-loading-text":t.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},domProps:{innerHTML:t._s(t.salt_exe_result_data)}},[t._v(t._s(t.salt_exe_result_data))])])],1)],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.dialogInfoVisible,title:t.infoTemp.salt_cmd,width:"40%"},on:{"update:visible":function(e){t.dialogInfoVisible=e}}},[a("el-input",{staticClass:"saltcmd-info-textarea",attrs:{type:"textarea",autosize:{minRows:8,maxRows:25},readonly:""},model:{value:t.infoTemp.salt_cmd_doc,callback:function(e){t.$set(t.infoTemp,"salt_cmd_doc",e)},expression:"infoTemp.salt_cmd_doc"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogInfoVisible=!1}}},[t._v("确定")])],1)],1)],1)},m=[],g=(a("ac6a"),a("b85c")),b=a("5c83"),h={directives:{elDragDialog:b["a"],waves:i["a"]},data:function(){var t=this,e=function(e,a,l){"runner"!=t.exeData.client?"any"==t.exeData.tgt_type||a?l():"minion_list"!=t.exeData.tgt_type?l(new Error("请选择执行对象")):l():l()},a=function(e,a,l){"runner"!=t.exeData.client?a?l():l(new Error("请选择执行对象类型")):l()};return{arg_count:1,args:[],salt_cmd_type:{local:"module",local_async:"module",runner:"runner"},salt_cmd_help:{local:"提示：等同命令行salt命令",local_async:"提示：等同命令行salt --async异步命令",runner:"提示：等同命令行salt-run命令,salt-run不需要执行对象参数"},temp_module:"",select_module:"",fun_list:[],module_list:[],minion_list:[],minionid_list:[],transfer_error:!1,dialogInfoVisible:!1,tgt_type:"",tgt_type_lable:{pcre:"Minion正则：",custom_group:"自定义组：",grain:"Grain：",grain_pcre:"Grain正则：",ip_address:"IP："},tgt_type_placeholder:{pcre:"正则匹配Minion id",custom_group:"自定义组功能开发中。。。：",grain:"例：os:CentOS 或os:Windows",grain_pcre:"例：os:Cent*",ip_address:"ip/ip段，例：192.168.1.1 or 192.168.1.0/24"},exeData:{client:"local",tgt:"",minion_list:[],tgt_type:"",fun:""},rules:{client:{required:!0,message:"请选择salt命令",trigger:"change"},tgt_type:{validator:a,trigger:"change"},fun:{required:!0,message:"请输入命令",trigger:"change"},tgt:{validator:e,trigger:"change"}},infoTemp:{},post_tgt_type:{any:"glob",minion_list:"list",grain:"grain",grain_pcre:"grain_pcre",ip_address:"ipcidr",pcre:"pcre"},salt_exe_result_data:"",exeLoading:!1,resultLoading:!1,loadingText:"执行中"}},watch:{"exeData.tgt_type":{handler:function(t,e){0===this.minionid_list.length&&"minion_list"===t&&this.getIdList()}},"exeData.minion_list":{handler:function(t,e){t.length>0&&(this.transfer_error=!1)}}},created:function(){this.searchModule()},methods:{addArg:function(){this.arg_count=this.arg_count+1},delArg:function(){this.arg_count>=2&&(this.arg_count=this.arg_count-1,this.args.pop())},searchModule:function(){var t=this;Object(r["p"])(this.salt_cmd_type[this.exeData.client]).then((function(e){t.module_list=e.data}))},handFilterModule:function(){this.select_module="",this.searchModule()},funSearch:function(t,e){var a=this;if(this.temp_module!=this.select_module)this.temp_module=this.select_module,Object(r["n"])(this.salt_cmd_type[this.exeData.client],this.select_module).then((function(l){a.fun_list=[];var n,s=Object(g["a"])(l.data);try{for(s.s();!(n=s.n()).done;){var o=n.value;a.fun_list.push({value:o.salt_cmd})}}catch(c){s.e(c)}finally{s.f()}var r=a.fun_list,i=t?r.filter(a.createFilter(t)):r;e(i)}));else{var l=this.fun_list,n=t?l.filter(this.createFilter(t)):l;e(n)}},createFilter:function(t){return function(e){return-1!=e.value.toLowerCase().indexOf(t.toLowerCase())}},getIdList:function(){var t=this;Object(r["m"])().then((function(e){var a=e.data.results;a.forEach((function(e,a){t.minion_list.push({label:e,key:a}),t.minionid_list.push(e)}))}))},getCmdInfo:function(){var t=this,e={salt_cmd_type:"",salt_cmd:""};this.infoTemp={},e.salt_cmd_type=this.salt_cmd_type[this.exeData.client],e.salt_cmd=this.exeData.fun,Object(r["o"])(e).then((function(e){t.infoTemp=Object.assign({},e.data.results[0]),t.dialogInfoVisible=!0}))},result_fun:function(t,e){if(t)for(var a in t){var l=t[a];"[object Object]"===Object.prototype.toString.call(l)||"[object Array]"===Object.prototype.toString.call(l)?(this.salt_exe_result_data=this.salt_exe_result_data+"<p style='color: #3FB8AF;padding-left: "+25*e+"px;'>"+a+":</p>",this.result_fun(l,e+1)):(this.salt_exe_result_data=this.salt_exe_result_data+"<p style='color: #3FB8AF;padding-left: "+25*e+"px;'>"+a+":</p>",this.salt_exe_result_data=this.salt_exe_result_data+"<p style='padding-left: "+25*(e+1)+"px;'>"+l+"</p>")}},handSaltExe:function(){var t=this;this.exeLoading=!0,this.$refs.ruleForm.validate((function(e){if(!e)return t.exeLoading=!1,t.resultLoading=!1,!1;var a,l={client:t.exeData.client,tgt:t.exeData.tgt,tgt_type:t.post_tgt_type[t.exeData.tgt_type],fun:t.exeData.fun,arg:[]},n=Object(g["a"])(t.args);try{for(n.s();!(a=n.n()).done;){var s=a.value;s.trim()&&l.arg.push(s)}}catch(d){n.e(d)}finally{n.f()}if("minion_list"===t.exeData.tgt_type){if(!t.exeData.minion_list.length)return t.transfer_error=!0,t.exeLoading=!1,!1;t.transfer_error=!1,l.tgt=[];var o,i=Object(g["a"])(t.exeData.minion_list);try{for(i.s();!(o=i.n()).done;){var c=o.value;l.tgt.push(t.minionid_list[c])}}catch(d){i.e(d)}finally{i.f()}l.tgt=l.tgt.join(",")}else"any"===t.exeData.tgt_type&&(l.tgt="*");t.resultLoading=!0,l.salt_exe_tag="salt_exe",t.salt_exe_result_data="",Object(r["t"])(l).then((function(e){if(e.data.status){var a=0;for(var l in e.data.results){var n=e.data.results[l];"[object Object]"===Object.prototype.toString.call(n)?(t.salt_exe_result_data=t.salt_exe_result_data+"<p style='color: #45ddd4;font-weight: bold;'>"+l+":</p>",t.result_fun(n,a+1)):"[object Array]"===Object.prototype.toString.call(n)?(t.salt_exe_result_data=t.salt_exe_result_data+"<p style='color: #45ddd4;font-weight: bold;'>"+l+":</p>",t.result_fun(n,a+1),t.salt_exe_result_data=t.salt_exe_result_data+"\n\n"):(t.salt_exe_result_data=t.salt_exe_result_data+"<p style='color: #3FB8AF;font-weight: bold;'>"+l+":</p>",t.salt_exe_result_data=t.salt_exe_result_data+"<p style='padding-left: 25px;'>"+n+"</p>",t.salt_exe_result_data=t.salt_exe_result_data+"\n\n")}}else t.salt_exe_result_data="",t.salt_exe_result_data=t.salt_exe_result_data+"<p style='color: #bf0000;'>"+e.data.results+"</p>";t.exeLoading=!1,t.resultLoading=!1}))}))}}},v=h,x=(a("cffe"),Object(u["a"])(v,f,m,!1,null,"2ffa2f33",null)),y=x.exports,j={name:"SaltTool",components:{JobSearch:p,WindowsCrontab:y},data:function(){return{toolList:[{label:"任务查询",value:"JobSearch"},{label:"windows计划任务",value:"WindowsCrontab"}],saltTool:{name:""},tool_help:{JobSearch:"提示：通过jid查询salt执行的状态和结果",WindowsCrontab:"提示：快速创建一个windows的计划任务"}}}},w=j,k=(a("a812"),Object(u["a"])(w,l,n,!1,null,"4a94dab6",null));e["default"]=k.exports},cffe:function(t,e,a){"use strict";var l=a("3482"),n=a.n(l);n.a},d47d:function(t,e,a){}}]);