(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-722c8d09"],{"55c9":function(t,e,a){"use strict";var n=a("fa95"),i=a.n(n);i.a},9406:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("el-row",{attrs:{gutter:8}},[a("el-col",[a("div",{staticStyle:{padding:"0 5px 5px 0"}},[a("el-switch",{attrs:{"active-text":"自动更新","active-color":"#13ce66"},model:{value:t.autoUpdate,callback:function(e){t.autoUpdate=e},expression:"autoUpdate"}}),t._v(" "),a("span",{staticStyle:{float:"right","font-size":"14px",color:"#13ce66"}},[t._v("更新时间:"+t._s(t._f("parseTime")(t.now_time,"{h}:{i}:{s}")))])],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("minion-status-chart",{attrs:{list:t.minion_status_count},on:{"update:list":function(e){t.minion_status_count=e}}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("minion-info-chart",{attrs:{list:t.saltkey_certification_count},on:{"update:list":function(e){t.saltkey_certification_count=e}}})],1)]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("release-count-chart",{attrs:{list:t.release_log_count},on:{"update:list":function(e){t.release_log_count=e}}})],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:8}},[a("el-col",{staticStyle:{"padding-right":"8px","margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[a("task-log-table",{attrs:{list:t.task_log},on:{"update:list":function(e){t.task_log=e}}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[a("release-log-table",{attrs:{list:t.release_log},on:{"update:list":function(e){t.release_log=e}}})],1),t._v(" "),a("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[a("server-table",{attrs:{list:t.sys_status},on:{"update:list":function(e){t.sys_status=e}}})],1)],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},r=[],l=(a("ac4d"),a("8a81"),a("ac6a"),a("313e")),o=a.n(l),c=a("ed08"),u={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(c["a"])(function(){t.chart&&t.chart.resize()},100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var d=6e3,h={mixins:[u],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},list:{type:Array}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{list:function(t,e){var a=this;t!=e&&this.$nextTick(function(){a.initChart()})}},methods:{initChart:function(){var t=0,e=0,a=0;if(this.list){var n=!0,i=!1,s=void 0;try{for(var r,l=this.list[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var c=r.value;"在线"===c["minion_status"]?t=c["minion_status__count"]:"离线"===c["minion_status"]?e=c["minion_status__count"]:"异常"===c["minion_status"]&&(a=c["minion_status__count"])}}catch(u){i=!0,s=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw s}}}this.chart=o.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"Minion状态",subtext:"Minion状态统计"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"value"}],yAxis:[{type:"category",inverse:!0,data:["在线","离线","异常"]}],series:[{name:"数量",type:"bar",stack:"vistors",barWidth:"60%",itemStyle:{normal:{color:function(t){var e=["#22DDDD","#FE8463","#FAD860"];return e[t.dataIndex]}}},data:[t,e,a],animationDuration:d}]})}}},_=h,f=a("2877"),p=Object(f["a"])(_,s,r,!1,null,null,null),m=p.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},y=[],b=a("bd86");a("817d");var g={mixins:[u],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},list:{type:Array},now_time:{type:[String,Date]}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{list:function(t,e){var a=this;t!=e&&this.$nextTick(function(){a.initChart()})}},methods:{initChart:function(){var t,e=0,a=0,n=0,i=0;if(this.list){var s=!0,r=!1,l=void 0;try{for(var c,u=this.list[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;"accepted"===d["certification_status"]?e=d["certification_status__count"]:"unaccepted"===d["certification_status"]?a=d["certification_status__count"]:"denied"===d["certification_status"]?n=d["certification_status__count"]:"rejected"===d["certification_status"]&&(i=d["certification_status__count"])}}catch(h){r=!0,l=h}finally{try{s||null==u.return||u.return()}finally{if(r)throw l}}}this.chart=o.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"Minion信息",subtext:"Minion认证分布比例",left:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["已认证","待认证","禁止","已拒绝"]},series:[(t={name:"Minion信息",type:"pie",roseType:"radius",radius:"55%"},Object(b["a"])(t,"radius",[15,95]),Object(b["a"])(t,"data",[{value:e,name:"已认证"},{value:a,name:"待认证"},{value:n,name:"禁止"},{value:i,name:"已拒绝"}]),Object(b["a"])(t,"animationEasing","cubicInOut"),Object(b["a"])(t,"animationDuration",2600),t)]})}}},x=g,w=Object(f["a"])(x,v,y,!1,null,null,null),S=w.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},E=[];a("817d");var k={mixins:[u],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},list:{type:Array}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick(function(){t.initChart()})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{list:function(t,e){var a=this;t!=e&&this.$nextTick(function(){a.initChart()})}},methods:{initChart:function(){var t=0,e=0,a=0,n=0,i=0,s=0,r=0,l=0,c=0,u=0,d=0,h=0;if(this.list){var _=!0,f=!1,p=void 0;try{for(var m,v=this.list[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var y=m.value;1===y["month"]?t=y["count"]:2===y["month"]?e=y["count"]:3===y["month"]?a=y["count"]:4===y["month"]?n=y["count"]:5===y["month"]?i=y["count"]:6===y["month"]?s=y["count"]:7===y["month"]?r=y["count"]:8===y["month"]?l=y["count"]:9===y["month"]?c=y["count"]:10===y["month"]?u=y["count"]:11===y["month"]?d=y["count"]:12===y["month"]&&(h=y["count"])}}catch(b){f=!0,p=b}finally{try{_||null==v.return||v.return()}finally{if(f)throw p}}}this.chart=o.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:"月发布量",subtext:"发布系统发布量统计"},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"发布次数",type:"bar",barWidth:"60%",data:[t,e,a,n,i,s,r,l,c,u,d,h]}]})}}},C=k,z=Object(f["a"])(C,$,E,!1,null,null,null),D=z.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最新定时任务日志")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-top":"5px"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"任务名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.task_name)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("parseTime")(e.row.date_done,"{y}-{m}-{d} {h}:{i}"))+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-tag",{attrs:{type:t._f("statusFilter")(n.status)}},[t._v("\n        "+t._s(n.status)+"\n      ")])]}}])})],1)],1)},O=[],T={filters:{statusFilter:function(t){var e={SUCCESS:"success",STARED:"danger"};return e[t]},orderNoFilter:function(t){return t.substring(0,30)}},props:{list:{type:Array}},data:function(){return{}},methods:{}},j=T,A=Object(f["a"])(j,R,O,!1,null,null,null),N=A.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最新发布日志")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-top":"5px"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"应用名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.app_name)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t._f("parseTime")(e.row.create_time,"{y}-{m}-{d} {h}:{i}"))+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-tag",{attrs:{type:t._f("statusFilter")(n.release_result)}},[t._v("\n        "+t._s(n.release_result)+"\n      ")])]}}])})],1)],1)},F=[],L={filters:{statusFilter:function(t){var e={"发布成功":"success","发布失败":"danger"};return e[t]},orderNoFilter:function(t){return t.substring(0,30)}},props:{list:{type:Array}},data:function(){return{}},methods:{}},H=L,M=Object(f["a"])(H,I,F,!1,null,null,null),U=M.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"5px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("系统状态")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%","padding-top":"5px"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"名称","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.name)+"\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(a.value)+"\n    ")]}}])})],1)],1)},B=[],J={filters:{orderNoFilter:function(t){return t.substring(0,30)}},props:{list:{type:Array}},data:function(){return{}},methods:{}},P=J,q=Object(f["a"])(P,W,B,!1,null,null,null),G=q.exports,K=a("b775");function Q(t){return Object(K["a"])({url:"/dashboard/",method:"post",data:t})}var V={name:"DashboardAdmin",components:{MinionStatusChart:m,MinionInfoChart:S,ReleaseCountChart:D,TaskLogTable:N,ReleaseLogTable:U,ServerTable:G},watch:{autoUpdate:function(t){var e=this;t?(clearInterval(this.myInterval),this.myInterval=setInterval(function(){setTimeout(e.fetchData(),0)},6e4)):clearInterval(this.myInterval)}},created:function(){this.fetchData()},data:function(){return{autoUpdate:!1,list:null,now_time:"",old_list:null,myInterval:"",task_log:null,release_log:null,saltkey_certification_count:null,minion_status_count:null,release_log_count:null,sys_status:null}},methods:{fetchData:function(){var t=this,e={opt_cmd:"dashboard_search"};Q(e).then(function(e){var a=e.data.results;t.old_list!=a&&(t.release_log=e.data.results.release_log,t.task_log=e.data.results.task_log,t.saltkey_certification_count=e.data.results.saltkey_certification_count,t.minion_status_count=e.data.results.minion_status_count,t.release_log_count=e.data.results.release_log_count,t.sys_status=e.data.results.sys_status),t.now_time=new Date})}}},X=V,Y=(a("55c9"),Object(f["a"])(X,n,i,!1,null,"5f8b8149",null));e["default"]=Y.exports},fa95:function(t,e,a){}}]);